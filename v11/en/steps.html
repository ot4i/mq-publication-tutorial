<!DOCTYPE html>
<html class="no-js" lang="en">
 
	
<!-- header::Start -->
	<head>
		<!-- Use Internet Explorer 9 Standards mode for Eclipse Browser Control - https://www.eclipse.org/swt/faq.php#browsernativeie and https://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx -->
  		<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
		
		<!-- Next 2 http=equiv headers required to disable caching the Eclipse Browser Widget -->
		<meta http-equiv="Pragma" content="no-cache">
  		<meta http-equiv="Expires" content="-1">

		<meta charset="UTF-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<meta name="copyright" content="Copyright IBM Corporation 2014" />
		<meta name="abstract" content="IBM App Connect Enterprise V11 Tutorial">
		<meta name="author" content="IBM">
		<meta name="description" content="IBM App Connect Enterprise V11 Tutorial">
		<meta name="keywords" content="keywords" > 
		<meta name="robots" content="index,follow">
		<meta name="source" content="IBM App Connect Enterprise V11 Tutorial" /> 
		
		<title>IBM App Connect Enterprise V11 Tutorial</title>

    	<link rel="stylesheet" href="https://ot4i.github.io/iib-tutorials/css/main.css" />
		<link rel="stylesheet" href="https://ot4i.github.io/iib-tutorials/css/app.css" />
    	
		<script src="https://ot4i.github.io/iib-tutorials/js/json2.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/js2java.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/js2java_steps.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/vendor/modernizr.js"></script>
	</head>
<!-- header::End -->
<!-- body::Start -->
		<body>
  	<!-- body content here -->
	<div class="row">
	  <div class="small-12 medium-12 large-12 columns">
	    <p> </p>
	  </div>
	</div>
	<div class="row">
	  <div class="small-9 medium-9 large-9 columns">
	    <h4 class="title">MQ - Using the Publication node to publish messages on a topic <action><button class="small radius button" tabindex="0" id="stepsViewDetails" onclick="viewDetails()"> View Details</button> </action></h4>
	  </div>
	  <div class="small-3 medium-3 large-3 columns">
		<a href="javascript:;" onclick="openHelpSystem('/com.ibm.etools.msgbroker.helphome.doc/help_home_msgbroker.htm')" class="small right helplink">IBM Knowledge Center</a> 
	  </div>
	</div> 
	<hr>
	<div class="row">
		<div class="small-10 medium-10 large-10 columns">
		<h5> Learn how to use the Publication node to publish messages on an MQ topic defined on a local queue manager. </h5>
		</div>
		<div class="small-2 medium-2 large-2 columns">
			<button class="small radius button right" tabindex="0" id="backToGallery" onclick="backToGallery()"> Back To Gallery
			</button>
		</div>
	</div>
	<div class="row">          
		  <div class="small-12 medium-12 large-12 columns">
			<ul class="tabs vertical"> 
				<li class="tab-title tab-title-small active">
				  <a href="javascript:;" onclick="show('panel21')">Create</a> 
				</li>
				<li class="tab-title tab-title-small">
				  <a href="javascript:;" onclick="show('panel31')">Prepare</a> 
				</li>
				<li class="tab-title tab-title-small">
				  <a href="javascript:;" onclick="show('panel41')">Run</a> 
				</li>
			</ul>
			<!-- editing -->
			<div class="tabs-content panel-thin-blue vertical"> 
		    	<div class="content active" id="panel21">
		    		
		    		<div class="small-10 medium-10 large-10 columns divider">
					
				      	<div class="row content-details">
					      	<h4>Import projects</h4>
					        
						    
								<p> When you click Import, a project will be created in your workspace: An application named <span class="application">ExamplePublication</span>. </p>
								
							
								<p> <span class="application">ExamplePublication</span> provides two message flows named <span class="resource">Publication</span> and <span class="resource">Subscription</span>. </p>
								
							
								<p> The <span class="resource">Publication</span> message flow is driven by an HTTPInput nodes configured to receive a JSON input message. The HTTPInput is wired to an HTTPHeader node which deletes the input HTTP header and then drives a Mapping node to set the Topic name in the logical tree. The last node in the flow is the Publication node which publishes the message on the MQ topic. </p>
								
							
								<p> The <span class="resource">Subscription</span> message flow contains three separate MQInput nodes which each read from separate queues. Each MQInput is wired to the same Trace node which records information from the message to a local file. </p>
								
							
								<p> Once imported using the link on the right, the application <span class="application">ExamplePublication</span> is ready to be deployed and tested. To deploy, you can use a provided BAR file, as described on the Prepare tab. </p>
								
							
						</div>
						
						<div class="row content-details">
							<h4>Find out more</h4>
							<ul>
							
								
																
								<li> <a href="javascript:;" onclick="openHelpSystem('/com.ibm.etools.mft.doc/bi12002_.htm')" title="Knowledge Center link to Developing integration solutions by using applications">Developing integration solutions by using applications</a> </li>
							   	
							
							</ul>
						</div>
						
					</div>
					
					<div class="small-2 medium-2 large-2 columns">
					
					
					<h4 class="tkaction"><a href="javascript:;" onclick="importArtifacts(); openResource('MainFlow')"> Import <img class="icon-image" src="https://ot4i.github.io/iib-tutorials/images/icons/ibmdesign/back-right-previous_128-orange.png"></a></h4>
										
				    </div>
					
		    	</div>
		    	<div class="content" id="panel31">
					
					<div class="small-12 medium-12 large-12 columns">
					
						<div class="row content-details">
						  	<h4>Prepare a trace directory, create a queue manager and integration node, and then deploy the message flows</h4>
						    
						    
								<p> The tutorial includes a Trace node which uses a trace directory. The tutorial also requires MQ definitions for three queues and three subscriptions.  Execute the following steps to prepare your environment accordingly: </p>
								
								
									
									<ol>
									
									
										<li> The message flow's Trace node will attempt to write a trace file to the directory <code><span class="cmdname">C:\temp</span></code>. Create this directory if it does not already exist, or edit the Trace node in the message flow to use a different directory suitable for your runtime environment.
										
										</li>
									
										<li> Create an IBM MQ queue manager and configure it by completing the following steps:
										
										
											
											<ol>
											
												
													<li> Open the IBM App Connect Enterprise Console. If you don't already have one, create and start a queue manager:<br><code><span class="cmdname">crtmqm</span> <span class="varname">TESTQM</span></code><br><code><span class="cmdname">strmqm</span> <span class="varname">TESTQM</span></code></li>
												
													<li> Next create the three queues and three subscriptions by typing the following commands:<br><code>runmqsc <span class="varname">TESTQM</span></code><br><code>define define ql(SUBQ1)</code><br><code>define define ql(SUBQ2)</code><br><code>define define ql(SUBQ3)</code><br><code>define sub(SUB1) TOPICSTR(EXAMPLE_TOPIC) DEST(SUBQ1)</code><br><code>define sub(SUB2) TOPICSTR(EXAMPLE_TOPIC) DEST(SUBQ2)</code><br><code>define sub(SUB3) TOPICSTR(EXAMPLE_TOPIC) DEST(SUBQ3)</code></li>
												
											
											</ol>
											
										
										</li>
									
										<li> Create an integration node which is associated with the above queue manager by completing the following steps:
										
										
											
											<ol>
											
												
													<li> In the console window, create an integration node by typing the following command:<br><code><span class="cmdname">mqsicreatebroker</span> <span class="varname">TESTNODE</span> -q <span class="varname">TESTQM</span></code></li>
												
													<li> Start the integration node by typing the following command:<br><code><span class="cmdname">mqsistart</span> <span class="varname">TESTNODE</span></code></li>
												
													<li> Create an integration server associated with the integration node by typing the following command:<br><code><span class="cmdname">mqsicreateexecutiongroup</span> <span class="varname">TESTNODE</span> -e <span class="varname">default</span></code></li>
												
											
											</ol>
											
										
										</li>
									
										<li> Back in the Toolkit, drag and drop deploy the provided BAR file named <span class="application">PublishSubscribe.bar</span> which you will find inside the <span class="application">ExamplePublication</span> application.
										
										</li>
									
									
									</ol>
									
								
							
						</div>
						
						<div class="row content-details">
							<h4></h4>
							<ul>
							
							</ul>
						</div>
							
					</div>
					
		    	</div>
		    	<div class="content" id="panel41">
		    		
					<div class="small-12 medium-12 large-12 columns">
					
				    	<div class="row content-details">
					      	<h4></h4>
					        
						    
								<p> <h4>Use the Flow Exerciser to test the tutorial scenario </h4></p>
								
								
									
									<ol>
									
									
										<li> Open <span class="resource">Publication.msgflow</span>.
										
										
											
											<ul>
											
												
													<li> Click the Flow Exerciser icon <img src="http://ot4i.github.io/ot4i.tutorials//dist/images/icons/iib/startFlowExerciser.png" alt> to start testing the flow (when challenged you do not need to redeploy the flow again).</li>
												
													<li> Click the Send Message icon <img src="http://ot4i.github.io/ot4i.tutorials/dist/images/icons/iib/sendMessage.png" alt>.</li>
												
													<li> A saved input message is provided named <span class="resource">InputMessage</span> which contains this data:<br><span class="resource">{"Message":"Hello World"}</span><br>Select this input message and click Send and your message is sent to the HTTPInput node. The same data should be echoed in the response. Close the dialog and a green line is shown plotting the full path of the message through the flow.</li>
												
													<li> Using a text editor open the trace file <span class="resource">C:\temp\TracePublication.txt</span>, which should contain three entries, one for each of the paths in the Subscription flow:<br><code>================================================================================</code><br><code>A message arrived at the Trace node at 2019-08-12 21:53:11.597892</code><br><code>The flow propagation arrived through input queue 'SUBQ3'</code><br><code>The received message contained this data: 'Hello World'</code><br><code>================================================================================</code><br><code>================================================================================</code><br><code>A message arrived at the Trace node at 2019-08-12 21:53:11.597892</code><br><code>The flow propagation arrived through input queue 'SUBQ2'</code><br><code>The received message contained this data: 'Hello World'</code><br><code>================================================================================</code><br><code>================================================================================</code><br><code>A message arrived at the Trace node at 2019-08-12 21:53:11.597892</code><br><code>The flow propagation arrived through input queue 'SUBQ1'</code><br><code>The received message contained this data: 'Hello World'</code><br><code>================================================================================</code></li>
												
											
											</ul>
											
										
										</li>
									
									
									</ol>
									
								
							
								<p> This tutorial has shown the Publication node publishing messages on an MQ topic defined on a local queue manager. </p>
								
							
						</div>
						
						<div class="row content-details"> 	
							<h4>Find out more</h4>
							<ul>
							
								
																
								<li> <a href="javascript:;" onclick="openHelpSystem('/com.ibm.etools.mft.doc/ac04590_.htm')" title="Knowledge Center link to Publication node">Publication node</a> </li>
							   	
							
								
																
								<li> <a href="javascript:;" onclick="openHelpSystem('/com.ibm.etools.mft.doc/rt26110_.htm')" title="Knowledge Center link to Testing your message flow by using the Flow exerciser">Testing your message flow by using the Flow exerciser</a> </li>
							   	
							
							</ul>
						</div>
							
					</div>
					
				</div>	
			</div> <!-- tab-content -->
		</div> <!-- columns -->
	  </div> <!-- row --></body>
		<script src="https://ot4i.github.io/iib-tutorials/js/vendor/jquery.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/vendor/foundation.min.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/main.js"></script>
	</body>
<!-- body::End -->

</html>